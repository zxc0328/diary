<!DOCTYPE html><!--[if lte IE 8]>
<html lang="en" class="lte-ie8">
<![endif]-->
<!--[if gt IE 8]><!-->
<html lang="en">
<!--<![endif]--><head><meta charset="utf-8"><title>February 18, 2018</title><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/diary/styles/global.css"><link rel="stylesheet" href="/diary/styles/tomorrow.css"><link rel="stylesheet" href="/diary/styles/diary.css"></head><body><header class="header"><div class="index"><a href="/diary/">Index</a></div><h1>February 18, 2018</h1></header><div class="content"><div class="diary"><h2 id="react-component-dialog-form-tabs">React Component研究笔记（一）：dialog、form和Tabs</h2>
<p>这里主要对react-component的组件封装和API设计进行一些初步的总结。</p>
<h3 id="-dialog-https-github-com-react-component-dialog-"><a href="https://github.com/react-component/dialog">dialog</a></h3>
<p>dialog的特点：</p>
<ul>
<li>使用Portal插入到Modal root中。</li>
<li>声明式的设计，在render函数中用<code>&lt;Modal/&gt;</code>声明。</li>
<li>visible不是true话，不会渲染。达到一个懒渲染的效果。</li>
<li>自定义的模板，body用children。title和footer用renderProps定义。</li>
<li>有一个单独的Mask组件。</li>
</ul>
<h3 id="-form-https-github-com-react-component-form-"><a href="https://github.com/react-component/form">form</a></h3>
<p>form的特点：</p>
<ul>
<li>在组件中注入一个form对象，负责管理form的数据和验证的状态。类似Redux store。</li>
<li>设计了一个<code>createForm</code>HOC，来初始化表单对象。</li>
<li>rule中用async-validator支持异步验证。</li>
<li><code>getFieldProps</code>和<code>requiredDecorator</code>等等设计，快捷的在模板中初始化表单Item。比如传入value和绑定change事件。</li>
<li>表单Item可以配置trigger，trigger就是触发表单验证的event name。</li>
</ul>
<p>思考：看起来每个Form有一个自己的store，会和Redux等等全局Store体系不兼容。但一般表单页面的作用就是数据填报，给出初始数据之后，到submit，就结束了组件的生命周期。比如注册页、登录页、后端运营页等等。这种情况下一般不需要Redux。如果每个Item需要及时触发Redux Store的change，那就需要自行封装相关的针对性的组件。</p>
<h3 id="-tabs-https-github-com-react-component-tabs-"><a href="https://github.com/react-component/tabs">tabs</a></h3>
<ul>
<li>Tab内部的组件，比如TabBar、TabContent等，只暴露了TabPane。其他的自定义模板通过renderProp传入。在内部用相关组件拼装。这样让用户使用的Overhead更小了。因为我们其实是可以暴露内部组件，让用户控制整个children的。现在只需要在children里传入TabPane。</li>
<li>传入的TabPane通过React.Children获取。进行预处理。</li>
<li>React.cloneElement可以对一段React.Element进行Props的mixin。</li>
<li>组件提供了几种不同的TabBar，都属于高度封装的。</li>
</ul>
</div></div><footer class="footer"><address class="author">Copyright &copy;<a rel="author" href="https://github.com/zindex" class="author-name">Zindex</a>-<a href="https://github.com/zxc0328/diary-content" class="source-repo">Source</a></address><p>Generated by<a href="https://github.com/joyeecheung/diary" class="site-repo">Joyee Cheung&#39;s diary generator</a></p></footer></body></html>