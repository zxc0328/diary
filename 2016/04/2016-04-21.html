<!DOCTYPE html><!--[if lte IE 8]>
<html lang="en" class="lte-ie8">
<![endif]-->
<!--[if gt IE 8]><!-->
<html lang="en">
<!--<![endif]--><head><meta charset="utf-8"><title>April 21, 2016</title><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/diary/styles/global.css"><link rel="stylesheet" href="/diary/styles/tomorrow.css"><link rel="stylesheet" href="/diary/styles/diary.css"><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-63818301-1', 'auto');
ga('send', 'pageview');</script></head><body><header class="header"><div class="index"><a href="/diary/">Index</a></div><h1>April 21, 2016</h1></header><div class="content"><div class="diary"><h2 id="dom-properties-vs-attributes">DOM properties vs attributes</h2>
<h3 id="dom-properties">DOM properties</h3>
<p>Because every DOM node is a object, so it has properties for sure. DOM properties refer to the properties of that DOM object.</p>
<h3 id="dom-attributes">DOM attributes</h3>
<p><code>attributes</code> is actually one of the many DOM properties. <code>attributes</code> is repersented by <code>NamedNodeMap</code> data structure in DOM. It is the map between the attribute&#39;s name and the attribute DOM node itself. FYI, attributes on HTML element are parsed to construct attribute node. The <code>nodetype</code> of attribute node is 2.</p>
<h3 id="the-reflection">The reflection</h3>
<p>The point here is most DOM properties just reflect the corresponding attribute&#39;s value in <code>Element.attributes</code>.</p>
<p>So when setting DOM properties using <code>node.properties</code>, the attribute&#39;s value inside  <code>Element.attributes</code> is updated according to certain rules, we&#39;ll get to that later. </p>
<p>And vice versa. When setting DOM attributes using <code>node.setAttribute()</code>, the DOM properties is updated. And that&#39;s also where some of the inital value of DOM properties come from. </p>
<p>While this fact stays true of the most of the time, we&#39;ll face some weird situation. Such as when you set <code>input.value</code>, the result of <code>input.getAttribute(&#39;value&#39;)</code> is still the defaultValue. That&#39;s beacuse the <code>value</code> in <code>Element.attributes</code> actually reflects the <code>defaultValue</code> property, not <code>value</code>.</p>
<p>And there is more, but that&#39;s all covered in spec. So if you&#39;re not afraid of getting your hands dirty, keep reading.</p>
<h3 id="ok-let-s-consult-the-spec">OK, let&#39;s consult the spec</h3>
<p>Beacuse DOM properties is just values in JavaScript, so technically it can be of any type in JavaScript. </p>
<p>But attribute in <code>Element.attributes</code> is just a <code>DOMString</code>. So when these two convert, coerction happens.</p>
<p>The rules of reflection is in <a href="https://html.spec.whatwg.org/multipage/infrastructure.html#reflecting-content-attributes-in-idl-attributes">here</a></p>
<h3 id="links">Links</h3>
<p>No links today, have fun!!</p>
</div></div><footer class="footer"><address class="author">Copyright &copy;<a rel="author" href="https://github.com/zxc0328" class="author-name">ccnuzindex</a>-<a href="https://github.com/zxc0328/diary-content.git" class="source-repo">Source</a></address><p>Generated by<a href="https://github.com/joyeecheung/diary" class="site-repo">Joyee Cheung&#39;s diary generator</a></p></footer></body></html>