<!DOCTYPE html><!--[if lte IE 8]>
<html lang="en" class="lte-ie8">
<![endif]-->
<!--[if gt IE 8]><!-->
<html lang="en">
<!--<![endif]--><head><meta charset="utf-8"><title>April 25, 2016</title><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/diary/styles/global.css"><link rel="stylesheet" href="/diary/styles/tomorrow.css"><link rel="stylesheet" href="/diary/styles/diary.css"></head><body><header class="header"><div class="index"><a href="/diary/">Index</a></div><h1>April 25, 2016</h1></header><div class="content"><div class="diary"><h2 id="-jquery-">关于组件化的一些想法&amp;&amp;jQuery的构造函数</h2>
<h3 id="jquery-">jQuery构造函数</h3>
<p>参考jsAron的这篇<a href="http://www.cnblogs.com/aaronjs/p/3278578.html">文章</a></p>
<p>核心代码：</p>
<pre><code><span class="hljs-keyword">var</span> aQuery = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">selector, context</span>) </span>{
       <span class="hljs-keyword">return</span>  <span class="hljs-keyword">new</span> aQuery.prototype.init();
}
aQuery.prototype = {
    init: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    },
    name: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.age
    },
    age: <span class="hljs-number">20</span>
}

aQuery.prototype.init.prototype = aQuery.prototype;

<span class="hljs-built_in">console</span>.log(aQuery().name()) <span class="hljs-comment">//20</span>
</code></pre><p>jQuery这个全局变量，本质是一个函数。可以加括号，然后传入选择器调用，返回包装过的DOM对象。同时JavaScript中的函数也是一个对象，所以可以像普通对象一样访问上面的方法。当然这些方法是放在<code>jQuery.protorype</code>上面的。</p>
<p>jQuery构造函数返回的是内部<code>jQuery.prototype.init()</code>构造的实例。这个很容易理解，如果把构造函数逻辑写在jQuery这个函数里，那就死循环了。</p>
<p>但是<code>jQuery.prototype.init()</code>这个函数的<code>prototype</code>并不是<code>jQuery.prototype</code>，所以最后一句代码用来修复这个问题</p>
<h3 id="-">关于组件的想法</h3>
<p>现在产品中的组件，其实可以分为几种。</p>
<p>一种是没有数据是纯UI组件。比如返回顶部按钮，导航栏等等</p>
<p>一种是有数据的组件，其中分UI组件，业务展示组件，以及业务交互组件。UI组件比如banner，业务展示组件比如一些列表。业务交互组件比如交互式表单，提供预览的搜索框等。</p>
<p>现在有数据的UI组件，可能是同步渲染，也可能是异步渲染。这个用简单的jQueryUI组件模式就可以解决。业务展示组件也可以用这种模式解决。</p>
<p>涉及交互的组件，需要Model来存放数据，View（字符串模板或者Virtual DOM），以及ViewModel来负责业务逻辑和组件生命周期控制。目前Vuejs是一个比较合适的选择。</p>
</div></div><footer class="footer"><address class="author">Copyright &copy;<a rel="author" href="https://github.com/zindex" class="author-name">Zindex</a>-<a href="https://github.com/zxc0328/diary-content" class="source-repo">Source</a></address><p>Generated by<a href="https://github.com/joyeecheung/diary" class="site-repo">Joyee Cheung&#39;s diary generator</a></p></footer></body></html>